<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

	<bean id="serverPool" class="com.datatrees.webrobot.pool.ServerPoolImpl">
	</bean>

	<bean id="serverStatusWatcher" class="com.datatrees.webrobot.subscriber.ServerStatusWatcher">
		<constructor-arg index="0" value="${server.watcher.name:RobotServer}" />
		<property name="serverPool" ref="serverPool"></property>
	</bean>

	<bean id="clientDriverManager" class="com.datatrees.webrobot.driver.ClientDriverManager">
		<property name="serverPool" ref="serverPool"></property>
	</bean>


	<bean id="serverSubscriber" class="com.datatrees.webrobot.subscriber.ServerSubscriber" init-method="init">
		<property name="client" ref="zookeeperClient"></property>
		<property name="watcherList">
			<list>
				<ref bean="serverStatusWatcher" />
			</list>
		</property>
	</bean>

</beans>


